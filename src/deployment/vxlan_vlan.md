## VXLAN + VLAN 自服务模型

---

### 简介

VXLAN + VLAN 自服务模型是 UnitedStack<sup>®</sup> UNP 默认推荐的部署模型，属于
 Vendor-Free 方案之一。该方案完全是由 UnitedStack<sup>®</sup> 借助开源项目例如
OpenvSwitch、Linux 等基于标准硬件或开放标准的硬件实现的架构，目前主要是OpenvSwitch
 Drvier 实现的纯软件方案。本方案特点是完全开源、成本低、供应商选择丰富等。

### 设备角色及推荐配置

|设备类型|用途|推荐配置|数量|备注|
|:-:|:-:|:-:|:-:|:-:|
|服务器|计算节点|至少2路Intel E5 4核 2.0Ghz 以上处理器，支持超线程技术，内存最低 256G|3|3台起配|
|服务器|网络节点|至少2路Intel E5 4核 2.0Ghz 以上处理器，支持超线程技术，内存最低 128G|3||
|服务器|控制节点|至少2路Intel E5 4核 2.0Ghz 以上处理器，支持超线程技术，内存最低 128G|3||
|接入层千兆设备|接入交换设备|48口千兆，支持10G上联|1|根据业务需求增加设备数量|
|接入层万兆设备|接入交换设备|48口万兆，支持PBR，40G上联|1|根据业务需求增加设备数量|
|VPN 设备|远程接入|支持 IPSec|1||
|线缆|设备连接线缆|服务器连接线缆：DAC/SFP+/RJ45(根据设备接口而定) 交换机堆叠线缆：DAC/SFP+/QSFP+(根据设备接口而定)|若干|||

### 网卡相关信息

#### 推荐的网卡型号

#### 各个设备的网卡信息

|设备角色|千兆网卡|万兆网卡|Bonding|
|:-:|:-:|:-:|:-:|
|计算节点|eth0|eth2|eth0 + eth1 => Bond0|
|计算节点|eth1|eth3|eth2 + eth3 => Bond1|
|网络节点|eth0|eth2|eth0 + eth1 => Bond0|
|网络节点|eth1|eth3|eth2 + eth3 => Bond1|

#### VLAN 规划

||VLAN 1100|VLAN 1124|VLAN 1002|VLAN 1116|
|:-:|:-:|:-:|:-:|:-:|
|计算节点|管理网 + Ceph Mon|SDN|外部网络（FloatingIP）|存储|
|网络节点|管理网 + API|SDN|外部网络（SNAT）|-|

```
说明：
1. 两个千兆网口 eth0 和 eth1 做Bond0，Bond0 在千兆接入上配置 Access 1100；
2. 两个万兆网口 eth2 和 eth3 做Bond1，Bond1 在万兆接入上配置 Trunk 1124 1002 1116，
其中，VLAN 1124 1116 由 Linux VLAN 子接口实现，VLAN 1002 在 Neutron 中定义
VLAN 为 1002 的外部网络。
```
