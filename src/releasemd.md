# 版本说明

---

## 1.0 (Perlis)

### 简介

UnitedStack<sup>®</sup> UNP 1.0 (Perlis) 是 UnitedStack<sup>®</sup> UNP 的第一个版本，因此与之对比的是 UnitedStack<sup>®</sup> OpenStack 2.0 (CSP) 网络子系统。

UnitedStack<sup>®</sup> UNP 1.0 包含开源和厂商两类核心网络实现，其中开源实现为 Open vSwitch Driver，厂商实现包括 Cisco VTS 集成、Cisco ACI 集成、BigSwitch BCF 集成、Huawei Agile Controller，计划测试的还有 H3C Virtual Converged Framework，但目前没有排期。

为了提供更加完善和专业的方案，UnitedStack<sup>®</sup> UNP 提供了大量的第三方厂商产品支持，除了上述核心网络实现外，还提供了 Cisco ICF、F5 BIG-IP、Hillstone 云界等的支持，目前在开展的有排期的第三方产品还有 6WIND Virtual Accelerator、Citrix NetsSaler NCC，详情见本白皮书的生态部分。

UnitedStack<sup>®</sup> UNP 的目前主要工作重点在开源实现 Open vSwitch Driver 或其他基于开源软件的实现上，包括在其基础上的：

 - 架构
   - 分布式三层、VXLAN 等
 - 部署
   - 接入层高可用，推荐硬件设备，参考拓扑等
 - 功能
   - RBAC Networks, Internal DNS, Port Security 等
 - 提升
   - Quota 可靠性、连接安全控制、OVS Agent 可靠性、DNS 顺序指定等
 - 性能
   - 当前架构上的性能数据，目前用于提升性能的手段等
 - 稳定性
   - 控制平面、一些功能、Agent 的可靠性与稳定性提升，数据库升级时间的减短等
 - 高级服务
   - LBaaS、VPNaaS 等
 - 系统
   - 消息队列、内核、内核参数、网卡驱动、BIOS、Qemu 网络模块的优化
 - 生态系统
   - 对接第三方产品时的考虑、目前已支持的第三方产品说明和测试计划

目前 UNP 1.0 由于各方面资源、时间原因并没有完成完整预期，但着重完成了架构、部署和生态系统部分，但其中仍有一些内容需要完善例如配置项的具体介绍等。性能、稳定性、功能、系统、用户典型使用场景简单完成了一点，高级服务和提升暂时没有内容。因此本文档所介绍版本目前为 1.0 RC1，后续将会继续更新，大版本号还在 1.x Perlis 下。

Perlis 版将继续晚上以上内容和提供提供裸机网络支持，下一个版本 2.0 (Wilkes) 重点为基于 DPDK 技术提供更高性能的网络支持和架构更为优化的、不依赖集中消息队列的稳定纯软 SDN 方案。

相比 UnitedStack<sup>®</sup> OpenStack 2.0 (CSP) 网络子系统（以下表格简称 CSP），UnitedStack<sup>®</sup> UNP 1.0 (Perlis)（以下表格简称 UNP Perlis）在确定性、稳定性、文档完善、架构、通信效率等方面做了很大的完善，但目前功能和特性上存在一些不足或取舍，对比表格如下：

| 比较项 | CSP | UNP |
| ----- | --- | --- |
| 分布式路由 | 无 | 提供，默认支持 |
| 虚拟路由高可用 | 基于消息队列 | 对分布式路由器 SNAT 模块提供 Pacemaker 高可用，对于集中式路由器提供 VRRP 高可用 |
| VXLAN 流量优化 | 会话学习 | 会话学习、ARP 抑制、广播抑制，理论上通信中不存在无效广播 |
| VLAN 自服务网络 | 无文档说明 | 提供标准化部署和使用说明 |
| 外部网络 | 一个二层的外部网络，默认千兆网卡，集中式 | 支持多个 VLAN 的外部网络，默认与业务网共用万兆网卡，1:1 NAT 为分布式 |
| 外部网络 IP 使用 | 无浪费，可在虚拟路由器配置端口转发 | 每个计算节点浪费一个外部网络 IP（减少交换机 MAC 表条目）、虚拟路由器上的 IP 在开启网关默认使用一个公网 IP 用作 SNAT（SNAT 可关闭，但 IP 始终占用），目前无端口转发|
| SRIOV 支持 | 转发层支持 | 暂未完成，计划本 Release 完成 |
| RBAC 网络 | 无 | 可对网络做 RBAC 控制，后端支持 |
| 内部 DNS | 无 | 可对虚拟机设置内部 DNS Name 等，暂未完成，本 Release 完成 |
| QoS | 针对虚拟机可实现以网络为单位的虚拟网卡 QoS 和外网 IP 限速 | 可以设置 QoS 规则限制虚拟网卡，暂未完成，本 Release 完成，外网 IP 限速暂未实现 |
| 指定虚拟路由器外部网络地址 | 支持 | 无法指定，只允许管理员修改，暂缺乏文档描述，本 Release 完成相关文档 |
| LBaaS | 支持七层和高可用 | 暂不支持七层和高可用，支持 F5 BIGIP，暂缺乏文档描述，本 Release 完成相关文档 |
| GRE 隧道、PPTP、OpenVPN | 支持 | 暂不支持，支持使用山石云界安全网关 |
| 消息队列 | 可靠性低 | 完成客户端高可用和关闭冗余的高可用选项，提升性能，分布式队列计划将来完成 |
| 安全 | 安全组、山石云界安全网关 | 支持安全组、Group Based Policy（建议搭配 Cisco ACI 使用）、连接域控制（暂时缺乏文档）、支持山石云界安全网关，暂缺乏文档描述，本 Release 完成相关文档 |
| IPSec VPN | 基于 OpenSwan，安全性和稳定性差 | 基于 StrongSwan 安全性和稳定性有所提升，支持使用山石云界安全网关 |
| DNS 顺序指定 | 不支持 | 支持，可以指定推送到虚拟机的 DNS Server 顺序，暂缺乏文档描述，本 Release 完成相关文档 | 
| 子网池 | 不支持 | 后端支持，暂缺乏文档描述 |
| 部署 | 无成熟文档 | 提供了基本说明、硬件介绍、标准配置文件、VPN 接入指南，缺乏 Bond、部署前测试、拓扑等内容 |
| 性能 | 未提供正式数据和标准化测试方法 | 提供了简单的测试数据和较为标准化测试方法，提供优化建议和硬件建议，缺乏对测试项的说明和考虑以及各优化项的影响等，发包器测试在下一个 Release 实现 |
| 网卡调优 | 开启队列绑定、UDP RSS 等网卡调优 | 除 CSP 内容为，正在调研 Flow Director 等，由于有研究称可能有乱序的问题，因此暂未提供直到问题全部解决 |
| 稳定性 | 无标准化文档说明 | 提供了简单的第一版，测试详细内容、标准化测试项于测试方法、高负载拟业务环境测试等暂未完成，本 Release 完成 |
| 数据库升级时间 | 较长 | 有所减少，无停机实现计划在未来实现，无确定 Release |
| LLDP | 默认未安装 | 默认开启，方便检查网络拓扑，暂时缺乏细致描述 |
| 用户典型场景说明 | 介绍了企业内网互联等一些场景 | 目前只介绍了虚拟机多 Floating IP 在 Ubuntu 下的配置方法，缺乏 CentOS 配置方法、多二层网络、攻击或被攻击等使用场景说明 |
| OVS 配置方式 | 命令模拟 | 基于 OVSDB 和本地模拟控制器，暂时缺乏细致描述，本 Release 完成 |
| Cisco VTS | 支持 | 支持，暂缺乏文档描述，本 Release 完成相关文档 |
| Cisco ACI | 未测试 | 支持 |
| Cisco ICF | 支持 | Cisco 暂未推出 L 版，需要修改和新版本 |
| BigSwitch BCF | 在社区 K 版完成测试 | 在社区 K 版完成测试，L 版需要修改或厂商提供新版本 |
| F5 BIGIP | 未测试 | 支持，暂缺乏文档描述，本 Release 完成相关文档，VE 版本未于测试计划，暂无排期 |
| Huawei Agile COntroller | 未测试 | 支持，暂缺乏文档描述，本 Release 完成相关文档 |
| 基础网络 | 默认创建 | 默认无 |
| 安全组实现 | 效率低 | 转发平面替换为 ipset，性能提升，暂缺乏文档描述，本 Release 完成相关文档，控制平面无提升，暂无计划 |
| 虚拟网卡 TX 包速限制 | 支持 | 暂不支持，暂无排期 |
| 外网 IP 备案信息 | 支持 | 暂不支持，暂无排期 |
| 配置文件设置默认安全组 | 支持 | 暂不支持，暂无排期 |
| 资源创建时间 | 支持 | 暂不支持，暂无排期 |